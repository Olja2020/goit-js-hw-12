{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const imagesGallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\n\nexport function renderUsers(images) {\n  form.reset();\n\n  const markup = images\n    .map(image => {\n      return `<div class=\"card\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <ul class=\"list\">\n            <li class=\"item\">Likes: <span>${image.likes}</span></li>\n            <li class=\"item\">Views: <span>${image.views}</span></li>\n            <li class=\"item\">Comments: <span>${image.comments}</span></li>\n            <li class=\"item\">Downloads: <span>${image.downloads}</span></li>\n          </ul>\n          </div>`;\n    })\n    .join('');\n\n  imagesGallery.innerHTML = markup;\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n","//const { default: iziToast } = require('izitoast');\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n// Controls the group number\n let page = 1;\n// Controls the number of items in the group\nlet per_page = 15;\nconst totalPages = Math.ceil(100 / per_page);\n\nconst button = document.querySelector('button');\nconst inputSearch = document.querySelector('.search');\nconst loader = document.querySelector('.loader');\nimport { renderUsers } from './render-functions';\n\nexport async function fetchImages() {\n  let inputSearchValue = inputSearch.value;\n  const url = `https://pixabay.com/api/?key=42766573-a347fa67a5b7233d1286bfaa7&q=${inputSearchValue}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n  {\n      const params = new URLSearchParams({\n        per_page,\n        page\n      });\n\n  if (inputSearchValue) {\n    \n      try{\n        const response =  await axios.get(url);\n      return response.data;\n      }\n      \n        // .then(response => {\n          \n        // return response.json();\n        // })\n      \n      //   .then(data => {\n      //     if (response.data.hits.length === 0) {\n      //       iziToast.error({\n      //         title: '',\n      //         message:\n      //           'Sorry, there are no images matching your search query. Please try again!',\n      //       });\n      //     } else {\n      //       const imagesData = {\n      //         totalHits: data.totalHits,\n      //         total: data.total,\n      //         images: data.hits,\n      //       };\n      //       renderUsers(response.data.hits);\n      //     }\n      // })\n      \n        catch(error) {\n          console.log(error);\n        };\n       \n  \n  }\n  }}\n\n\n\n// const fetchPostsBtn = document.querySelector(\".btn\");\n// const postList = document.querySelector(\".posts\");\n\n// // Controls the group number\n// let page = 1;\n// // Controls the number of items in the group\n// let limit = 40;\n// // In our case total number of pages is calculated on frontend\n// const totalPages = Math.ceil(100 / limit);\n\n// fetchPostsBtn.addEventListener(\"click\", async () => {\n//   // Check the end of the collection to display an alert\n//   if (page > totalPages) {\n//     return iziToast.error({\n//       position: \"topRight\",\n//       message: \"We're sorry, there are no more posts to load\"\n//     });\n//   }\n\n//   try {\n//     const posts = await fetchPosts();\n//     renderPosts(posts);\n//     // Increase the group number\n//     page += 1;\n\n//     // Replace button text after first request\n//     if (page > 1) {\n//       fetchPostsBtn.textContent = \"Fetch more posts\";\n//     }\n//   } catch (error) {\n//     console.log(error);\n//   }\n// });\n\n// async function fetchPosts() {\n//   const params = new URLSearchParams({\n//     _limit: limit,\n//     _page: page\n//   });\n\n//   const response = await axios.get(\n//     `https://jsonplaceholder.typicode.com/posts?${params}`\n//   );\n//   return response.data;\n// }\n\n// function renderPosts(posts) {\n//   const markup = posts\n//     .map(({ id, title, body, userId }) => {\n//       return `<li>\n//           <h2 class=\"post-title\">${title.slice(0, 30)}</h2>\n//           <p><b>Post id</b>: ${id}</p>\n//           <p><b>Author id</b>: ${userId}</p>\n//           <p class=\"post-body\">${body}</p>\n//         </li>`;\n//     })\n//     .join(\"\");\n//   postList.insertAdjacentHTML(\"beforeend\", markup);\n// }\n// ********************************\n// export async function fetchImages() {\n//   let inputSearchValue = inputSearch.value;\n//   const url = https://pixabay.com/api/?key=42766573-a347fa67a5b7233d1286bfaa7&q=${inputSearchValue}&image_type=photo&orientation=horizontal&safesearch=true;\n\n//   if (inputSearchValue) {\n//     setTimeout(() => {\n//       axios.get(url)\n//         .then(response => {\n//           return response.data;\n//         })\n//         .then(data => {\n//           if (data.hits.length === 0) {\n//             iziToast.error({\n//               title: '',\n//               message: 'Sorry, there are no images matching your search query. Please try again!',\n//             });\n//           } else {\n//             const imagesData = {\n//               totalHits: data.totalHits,\n//               total: data.total,\n//               images: data.hits,\n//             };\n//             renderUsers(data.hits);\n//           }\n//         })\n//         .catch(error => {\n//           console.log(error);\n//         })\n//         .finally(() => {\n//           loader.style.display = 'none';\n//         });\n//     }, 1000);\n//   }\n// }","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderUsers } from './js/render-functions';\n\nconst button = document.querySelector('button');\nconst inputSearch = document.querySelector('.search');\nconst imagesGallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector(\".load\");\nlet page = 1;\n// Controls the number of items in the group\nlet per_page = 15;\nconst totalPages = Math.ceil(100 / per_page);\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst submitSearchImages = form.addEventListener('submit', async function (e) {\n  e.preventDefault();\n\n  loader.style.display = 'flex';\n  imagesGallery.innerHTML = '';\n  if (page > totalPages) {\n        return iziToast.error({\n          position: \"topRight\",\n          message: \"We're sorry, but you've reached the end of search results.\"\n        });\n      }\n  try {\n   await fetchImages();\n   renderUsers(response.data.hits);\n  }\n  \n  catch (error) {\n    iziToast.error({\n      color: 'red',\n      message: `:x: Sorry, there was a mistake. Please try again!`,\n      position: 'topRight',\n    });\n  }\n\n  form.reset();\n});\n\nconst loadMoreImages = form.addEventListener('submit', async function (e) {\n  e.preventDefault();\n\n  loader.style.display = 'flex';\n  \n  try {\n   await fetchImages();\n   \n    page += 1;\n    if (page > 1) {\n      //fetchPostsBtn.textContent = \"Fetch more images\";\n     }\n  }\n  \n  catch (error) {\n    iziToast.error({\n      color: 'red',\n      message: `:x: Sorry, there was a mistake. Please try again!`,\n      position: 'topRight',\n    });\n  }\n\n  form.reset();\n});\n\n\n// +++++++++++++++++++++++++++==\n// import axios from 'axios';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// const button = document.querySelector('button');\n// const inputSearch = document.querySelector('.search');\n// const imagesGallery = document.querySelector('.gallery');\n// const loader = document.querySelector('.loader');\n// const loadMoreButton = document.querySelector('.load');\n\n// let page = 1;\n// let limit = 15; // Показувати по 15 зображень на сторінці\n// let globalQuery = ''; // Глобальна змінна для збереження запиту користувача\n\n// form.addEventListener(\"submit\", async function(e) {\n//     e.preventDefault();\n//     globalQuery = inputSearch.value;\n//     page = 1; // Скидаємо сторінку до початкового значення при новому запиті.\n//     imagesGallery.innerHTML = ''; // Очистка галереї перед новим пошуком\n//     loader.style.display = 'block'; // Показуємо індикатор завантаження\n//     await fetchImages();\n// });\n\n// loadMoreButton.addEventListener('click', async () => {\n//     page++;\n//     await fetchImages();\n// });\n\n// async function fetchImages() {\n//     const url = https://pixabay.com/api/?key=42766573-a347fa67a5b7233d1286bfaa7&q=${globalQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${limit};\n\n//     try {\n//         const response = await axios.get(url);\n\n//         if (response.data.hits.length === 0) {\n//             loader.style.display = 'none'; // Приховуємо індикатор завантаження\n//             iziToast.error({\n//                 title: '',\n//                 message: \"Sorry, no images found for your search. Please try again!\",\n//             });\n//         } else {\n//             renderImages(response.data.hits);\n//             loader.style.display = 'none'; // Приховуємо індикатор завантаження\n//             loadMoreButton.style.display = 'block'; // Показуємо кнопку \"Load more\"\n//         }\n//     } catch (error) {\n//         console.error(error);\n//     }\n// }\n\n// function renderImages(images) {\n//     const markup = images.map(image => {\n//         return <div class=\"card\">\n//             <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n//                 <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n//             </a>\n//             <ul class=\"list\">\n//                 <li class=\"item\">Likes: <span>${image.likes}</span></li>\n//                 <li class=\"item\">Views: <span>${image.views}</span></li>\n//                 <li class=\"item\">Comments: <span>${image.comments}</span></li>\n//                 <li class=\"item\">Downloads: <span>${image.downloads}</span></li>\n//             </ul>\n//         </div>;\n//     }).join('');\n\n//     imagesGallery.innerHTML += markup; // Додаємо нові зображення до існуючого контенту галереї\n\n//     const lightbox = new SimpleLightbox('.gallery a');\n//     lightbox.refresh();\n// }"],"names":["imagesGallery","form","renderUsers","images","markup","image","page","per_page","inputSearch","fetchImages","inputSearchValue","url","axios","error","loader","totalPages","SimpleLightbox","e","iziToast"],"mappings":"+vBAAA,MAAMA,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAO,SAAS,cAAc,OAAO,EAEpC,SAASC,EAAYC,EAAQ,CAClCF,EAAK,MAAK,EAEV,MAAMG,EAASD,EACZ,IAAIE,GACI;AAAA,wCAC2BA,EAAM,aAAa;AAAA,8CACbA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,4CAGxCA,EAAM,KAAK;AAAA,4CACXA,EAAM,KAAK;AAAA,+CACRA,EAAM,QAAQ;AAAA,gDACbA,EAAM,SAAS;AAAA;AAAA,iBAG1D,EACA,KAAK,EAAE,EAEVL,EAAc,UAAYI,EACT,IAAI,eAAe,YAAY,EACvC,QAAO,CAClB,CCnBC,IAAIE,EAAO,EAERC,EAAW,GAGA,SAAS,cAAc,QAAQ,EAC9C,MAAMC,EAAc,SAAS,cAAc,SAAS,EACrC,SAAS,cAAc,SAAS,EAGxC,eAAeC,GAAc,CAClC,IAAIC,EAAmBF,EAAY,MACnC,MAAMG,EAAM,qEAAqED,CAAgB,6EAA6EJ,CAAI,GAOlL,GALmB,IAAI,gBAAgB,CACzC,SAAQC,EACR,KAAQD,CACR,CAAO,EAEDI,EAEA,GAAG,CAEH,OADoB,MAAME,EAAM,IAAID,CAAG,GACvB,IACf,OAwBOE,EAAO,CACX,QAAQ,IAAIA,CAAK,CAE3B,CAGG,CChDY,SAAS,cAAc,QAAQ,EAC1B,SAAS,cAAc,SAAS,EACpD,MAAMb,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAO,SAAS,cAAc,OAAO,EACrCa,EAAS,SAAS,cAAc,SAAS,EAC9B,SAAS,cAAc,OAAO,EAC/C,IAAIR,EAAO,EAEPC,EAAW,GACf,MAAMQ,EAAa,KAAK,KAAK,IAAMR,CAAQ,EAE3B,IAAIS,EAAe,aAAc,CAC/C,aAAc,IACd,aAAc,KAChB,CAAC,EAE0Bf,EAAK,iBAAiB,SAAU,eAAgBgB,EAAG,CAK5E,GAJAA,EAAE,eAAc,EAEhBH,EAAO,MAAM,QAAU,OACvBd,EAAc,UAAY,GACtBM,EAAOS,EACL,OAAOG,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACnB,CAAS,EAEP,GAAI,CACH,MAAMT,EAAW,EACjBP,EAAY,SAAS,KAAK,IAAI,CAC9B,MAEa,CACZgB,EAAS,MAAM,CACb,MAAO,MACP,QAAS,oDACT,SAAU,UAChB,CAAK,CACF,CAEDjB,EAAK,MAAK,CACZ,CAAC,EAEsBA,EAAK,iBAAiB,SAAU,eAAgBgB,EAAG,CACxEA,EAAE,eAAc,EAEhBH,EAAO,MAAM,QAAU,OAEvB,GAAI,CACH,MAAML,EAAW,EAEhBH,GAAQ,EACJA,EAAO,CAGZ,MAEa,CACZY,EAAS,MAAM,CACb,MAAO,MACP,QAAS,oDACT,SAAU,UAChB,CAAK,CACF,CAEDjB,EAAK,MAAK,CACZ,CAAC"}