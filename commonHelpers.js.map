{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst imagesGallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\n\nexport function renderUsers(images) {\n  const markup = images\n    .map(image => {\n      return `<div class=\"card\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <ul class=\"list\">\n            <li class=\"item\">Likes: <span>${image.likes}</span></li>\n            <li class=\"item\">Views: <span>${image.views}</span></li>\n            <li class=\"item\">Comments: <span>${image.comments}</span></li>\n            <li class=\"item\">Downloads: <span>${image.downloads}</span></li>\n          </ul>\n          </div>`;\n    })\n    .join('');\n\n  imagesGallery.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n","import SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nlet per_page = 15;\n\nconst loadMoreButton = document.querySelector('.load');\nconst button = document.querySelector('.searchButton');\nconst inputSearch = document.querySelector('.search');\nconst loader = document.querySelector('.loader');\nimport { renderUsers } from './render-functions';\nimport { page } from '../main.js';\nimport { inputSearchValue } from '../main.js';\nconst totalPages = Math.ceil(100 / per_page);\ndebugger;\nexport async function fetchImages() {\n  const url = `https://pixabay.com/api/?key=42766573-a347fa67a5b7233d1286bfaa7&q=${inputSearchValue}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${per_page}&page=${page}`;\n\n  if (inputSearchValue) {\n    try {\n      const response = await axios.get(url);\n\n\nif (response.data.hits.length === 0) {\n  loader.style.display = 'none';\n  loadMoreButton.style.display = 'none';\n} else if (response.data.totalHits <= per_page * page) {\n  renderUsers(response.data.hits);\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'none';\n  iziToast.error({\n      color: 'blue',\n      message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n      position: 'topRight',\n  });\n} else {\n  renderUsers(response.data.hits);\n  if (response.data.totalHits > per_page * page) {\n      loadMoreButton.style.display = 'block';\n      loader.style.display = 'none';\n  }\n}\n\nreturn response.data;\n\n\n\n      \n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderUsers } from './js/render-functions';\n\nconst button = document.querySelector('.searchButton');\nconst inputSearch = document.querySelector('.search');\nconst imagesGallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load');\n\nexport let page = 1;\nexport let per_page = 15;\nexport let inputSearchValue = '';\nconst totalPages = Math.ceil(100 / per_page);\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\nconst submitSearchImages = form.addEventListener('submit', async function (e) {\n  e.preventDefault();\n  page = 1;\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'flex'; // Показати лоадер\n  imagesGallery.innerHTML = '';\n  inputSearchValue = e.target.elements.searchImages.value;\n  try {\n    const response = await fetchImages();\n    page += 1;\n   \n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  } catch (error) {\n    loadMoreButton.style.display = 'none';\n    iziToast.error({\n      color: 'red',\n      message: `:x: Sorry, there was a mistake. Please try again!`,\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none'; // Приховати лоадер\n  }\n  form.reset();\n});\nconst loadMoreImages = loadMoreButton.addEventListener(\n  'click',\n  async function (e) {\n    e.preventDefault();\n    loadMoreButton.style.display = 'none';\n    loader.style.display = 'flex'; // Показати лоадер\n    try {\n      const response = await fetchImages();\n      page += 1;\n      if (page > response.totalHits / per_page) {\n        loadMoreButton.style.display = 'none';\n        return iziToast.error({\n          color: 'blue',\n          message: `:x: We're sorry, but you've reached the end of search results.`,\n          position: 'topRight',\n        });\n      }\n      loadMoreButton.style.display = 'block';\n      const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    } catch (error) {\n      console.log(error);\n    } finally {\n      loader.style.display = 'none';\n      // Приховати лоадер\n    }\n  }\n);\n"],"names":["imagesGallery","renderUsers","images","markup","image","SimpleLightbox","per_page","loadMoreButton","loader","fetchImages","url","inputSearchValue","page","response","axios","iziToast","error","form","e","cardHeight"],"mappings":"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"}